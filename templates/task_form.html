{% extends "layout.html" %}
{% block title %}{{ 'Editar tarea' if task else 'Nueva tarea' }}{% endblock %}

{% block content %}
    <h2>{{ 'Editar tarea' if task else 'Nueva tarea' }}</h2>

    {% if errors %}
        <ul class="errors">
        {% for e in errors %}
            <li>{{ e }}</li>
        {% endfor %}
        </ul>
    {% endif %}

    <form method="POST" class="form">
        <label>
        Título *
        <input type="text" name="title" required
                value="{% if form %}{{ form.title }}{% elif task %}{{ task.title }}{% else %}{% endif %}">
        </label>

        <label>
        Descripción
        <textarea name="description" rows="4">{% if form %}{{ form.description }}{% elif task %}{{ task.description }}{% else %}{% endif %}</textarea>
        </label>

        <label>
        Fecha de vencimiento
        <input type="date" name="due_date"
                value="{% if form and form.due_date %}{{ form.due_date }}{% elif task and task.due_date %}{{ task.due_date.strftime('%Y-%m-%d') }}{% else %}{% endif %}">
        </label>

        {% if task %}
        <label class="checkbox">
            <input type="checkbox" name="completed" {% if (form and form.completed) or (task and task.completed) %}checked{% endif %}>
            Completada
        </label>
        {% endif %}

        <div class="form-actions">
        <button type="submit" class="btn">Guardar</button>
        <a class="btn secondary" href="{{ url_for('tasks.index') }}">Cancelar</a>
        </div>
    </form>
{% endblock %}


